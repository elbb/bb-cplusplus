# ===================================================
# images
# ===================================================
image=image-cplusplus-runtime-x86_64:
  image: "{env.BB_DOCKER_NAMESPACE:elbb}/bb-cplusplus-runtime/x86_64"
  context: runtime
  tags: ["{env.GitVersion_BranchVersion}"]
  args:
    ARCH: "amd64"

image=image-cplusplus-runtime-dev-x86_64:
  image: "{env.BB_DOCKER_NAMESPACE:elbb}/bb-cplusplus-runtime-dev/x86_64"
  context: runtime
  tags: ["{env.GitVersion_BranchVersion}"]
  args:
    ARCH: "amd64"
    DEV: "1"

image=image-cplusplus-runtime-aarch64:
  image: "{env.BB_DOCKER_NAMESPACE:elbb}/bb-cplusplus-runtime/aarch64"
  context: runtime
  tags: ["{env.GitVersion_BranchVersion}"]
  args:
    ARCH: "arm64v8"

image=image-cplusplus-runtime-dev-aarch64:
  image: "{env.BB_DOCKER_NAMESPACE:elbb}/bb-cplusplus-runtime-dev/aarch64"
  context: runtime
  tags: ["{env.GitVersion_BranchVersion}"]
  args:
    ARCH: "arm64v8"
    DEV: "1"

# ===================================================
# alias
# ===================================================

alias=cplusplus-runtime-build:
  tasks:
    - image-cplusplus-runtime-x86_64
    - image-cplusplus-runtime-dev-x86_64
    - image-cplusplus-runtime-aarch64
    - image-cplusplus-runtime-dev-aarch64

alias=cplusplus-runtime-deploy:
  tasks:
    - image-cplusplus-runtime-x86_64:push
    - image-cplusplus-runtime-aarch64:push
    - image-cplusplus-runtime-dev-x86_64:push
    - image-cplusplus-runtime-dev-aarch64:push
